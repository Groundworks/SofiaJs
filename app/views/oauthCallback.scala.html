<!DOCTYPE html>
<html>
  <head>
    <script>
      function getParameterByName(name)
      {
        name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
        var regexS = "[\\?&]" + name + "=([^&#]*)";
        var regex = new RegExp(regexS);
        var results = regex.exec(window.location.search);
        if(results == null)
          return "";
        else
          return decodeURIComponent(results[1].replace(/\+/g, " "));
      }
      
      var code = getParameterByName("code");
      window.opener.postMessage({type:"oauth",message:code},"http://sofiajs.com");
      alert("Message Sent");
    </script>
  </head>
  <body style="text-align:center;">
      <h1>Authenticating...</h1>
      <img src="/assets/ajax-loader.gif" alt="ajax loader"/>
  </body>
</html>
